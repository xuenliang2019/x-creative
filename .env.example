# X-Creative Environment Configuration
# Copy this file to .env and fill in your values
# .env is gitignored and will not be committed
#
# Configuration priority (highest → lowest):
#   1. Environment variables
#   2. .env file
#   3. ~/.config/x-creative/config.yaml
#   4. Default values in code

# =============================================================================
# LLM Provider API Keys (at least one required)
# =============================================================================

# OpenRouter API key (primary LLM provider)
# Get your key at: https://openrouter.ai/keys
OPENROUTER_API_KEY=sk-or-v1-your-key-here

# Yunwu API key (alternative LLM provider)
# Get your key at: https://yunwu.ai/
YUNWU_API_KEY=your-yunwu-api-key-here

# Default LLM provider: openrouter | yunwu
X_CREATIVE_DEFAULT_PROVIDER=openrouter

# Brave Search API key (for novelty verification web search)
# If empty, novelty verification will skip web search stage
# Get your key at: https://brave.com/search/api/
BRAVE_SEARCH_API_KEY=

# =============================================================================
# Data directory
# =============================================================================

# Session data storage directory (read via os.environ in CLI)
X_CREATIVE_DATA_DIR=local_data

# =============================================================================
# Generation defaults
# =============================================================================

# Number of hypotheses to generate per run
X_CREATIVE_DEFAULT_NUM_HYPOTHESES=50

# Graph-of-Thoughts search depth (expansion levels)
X_CREATIVE_DEFAULT_SEARCH_DEPTH=3

# Graph-of-Thoughts search breadth (branches per level)
X_CREATIVE_DEFAULT_SEARCH_BREADTH=5

# Max concurrent BISO (domain transfer) operations
X_CREATIVE_BISO_MAX_CONCURRENCY=8

# BISO LLM pool for diversity
# Each domain randomly selects a model from this pool.
# Set to '[]' to disable and use only the creativity task's primary model.
X_CREATIVE_BISO_POOL='["google/gemini-2.5-pro","anthropic/claude-sonnet-4","deepseek/deepseek-r1","deepseek/deepseek-chat-v3-0324"]'

# Runtime profile: "interactive" (fast) | "research" (thorough)
X_CREATIVE_RUNTIME_PROFILE=interactive

# =============================================================================
# Hypothesis scoring weights (must sum to 1.0)
# =============================================================================

# How far the hypothesis diverges from conventional thinking
X_CREATIVE_SCORE_WEIGHT_DIVERGENCE=0.21

# Whether the hypothesis can be tested/validated
X_CREATIVE_SCORE_WEIGHT_TESTABILITY=0.26

# Quality of the reasoning chain
X_CREATIVE_SCORE_WEIGHT_RATIONALE=0.21

# Resilience to counter-arguments
X_CREATIVE_SCORE_WEIGHT_ROBUSTNESS=0.17

# Practical implementability
X_CREATIVE_SCORE_WEIGHT_FEASIBILITY=0.15

# =============================================================================
# Final score composition (must sum to 1.0)
# =============================================================================

# Weight of logic verification in the final composite score
X_CREATIVE_FINAL_SCORE_LOGIC_WEIGHT=0.4

# Weight of novelty verification in the final composite score
X_CREATIVE_FINAL_SCORE_NOVELTY_WEIGHT=0.6

# =============================================================================
# VERIFY stage confidence controls
# =============================================================================

# Number of independent evaluations per hypothesis for consistency (1-9)
X_CREATIVE_MULTI_SAMPLE_EVALUATIONS=3

# Confidence discount factor for position-bias correction (0-1)
X_CREATIVE_POSITION_BIAS_CONFIDENCE_FACTOR=0.7

# LLM novelty score threshold to trigger web search
X_CREATIVE_SEARCH_THRESHOLD=6.0

# =============================================================================
# Model routing — core pipeline tasks
# =============================================================================
#
# Format:
#   X_CREATIVE_TASK_ROUTING__<TASK>__MODEL=<provider/model>
#   X_CREATIVE_TASK_ROUTING__<TASK>__TEMPERATURE=<0.0-1.0>
#   X_CREATIVE_TASK_ROUTING__<TASK>__MAX_TOKENS=<int>
#   X_CREATIVE_TASK_ROUTING__<TASK>__FALLBACK=<model1>,<model2>,...
#
# FALLBACK: comma-separated list of backup models tried in order when
#           the primary model fails (rate limit, timeout, etc.)

# --- Creativity: hypothesis generation (high temperature for divergent thinking) ---
X_CREATIVE_TASK_ROUTING__CREATIVITY__MODEL=google/gemini-2.5-pro
X_CREATIVE_TASK_ROUTING__CREATIVITY__TEMPERATURE=0.9
# X_CREATIVE_TASK_ROUTING__CREATIVITY__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__CREATIVITY__FALLBACK=anthropic/claude-sonnet-4

# --- Analogical mapping: cross-domain structural mapping ---
X_CREATIVE_TASK_ROUTING__ANALOGICAL_MAPPING__MODEL=google/gemini-2.5-flash
X_CREATIVE_TASK_ROUTING__ANALOGICAL_MAPPING__TEMPERATURE=0.7
# X_CREATIVE_TASK_ROUTING__ANALOGICAL_MAPPING__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__ANALOGICAL_MAPPING__FALLBACK=deepseek/deepseek-chat-v3-0324

# --- Structured search: Graph-of-Thoughts hypothesis expansion ---
X_CREATIVE_TASK_ROUTING__STRUCTURED_SEARCH__MODEL=google/gemini-2.5-flash
X_CREATIVE_TASK_ROUTING__STRUCTURED_SEARCH__TEMPERATURE=0.5
# X_CREATIVE_TASK_ROUTING__STRUCTURED_SEARCH__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__STRUCTURED_SEARCH__FALLBACK=deepseek/deepseek-chat-v3-0324

# --- Hypothesis scoring: fast lightweight multi-dimension evaluation ---
X_CREATIVE_TASK_ROUTING__HYPOTHESIS_SCORING__MODEL=google/gemini-2.5-flash-lite
X_CREATIVE_TASK_ROUTING__HYPOTHESIS_SCORING__TEMPERATURE=0.3
# X_CREATIVE_TASK_ROUTING__HYPOTHESIS_SCORING__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__HYPOTHESIS_SCORING__FALLBACK=deepseek/deepseek-chat-v3-0324

# --- Code generation: synthesize implementation code ---
X_CREATIVE_TASK_ROUTING__CODE_GENERATION__MODEL=deepseek/deepseek-chat-v3-0324
X_CREATIVE_TASK_ROUTING__CODE_GENERATION__TEMPERATURE=0.2
# X_CREATIVE_TASK_ROUTING__CODE_GENERATION__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__CODE_GENERATION__FALLBACK=google/gemini-2.5-flash

# --- Code review: quality review of generated code ---
X_CREATIVE_TASK_ROUTING__CODE_REVIEW__MODEL=google/gemini-2.5-flash
X_CREATIVE_TASK_ROUTING__CODE_REVIEW__TEMPERATURE=0.3
# X_CREATIVE_TASK_ROUTING__CODE_REVIEW__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__CODE_REVIEW__FALLBACK=deepseek/deepseek-chat-v3-0324

# --- Knowledge extraction: extract structured knowledge during domain YAML generation ---
X_CREATIVE_TASK_ROUTING__KNOWLEDGE_EXTRACTION__MODEL=deepseek/deepseek-chat-v3-0324
X_CREATIVE_TASK_ROUTING__KNOWLEDGE_EXTRACTION__TEMPERATURE=0.2
# X_CREATIVE_TASK_ROUTING__KNOWLEDGE_EXTRACTION__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__KNOWLEDGE_EXTRACTION__FALLBACK=google/gemini-2.5-flash-lite

# --- Logic verification: formal logic consistency check of hypotheses ---
X_CREATIVE_TASK_ROUTING__LOGIC_VERIFICATION__MODEL=google/gemini-2.5-flash
X_CREATIVE_TASK_ROUTING__LOGIC_VERIFICATION__TEMPERATURE=0.2
X_CREATIVE_TASK_ROUTING__LOGIC_VERIFICATION__MAX_TOKENS=2048
# X_CREATIVE_TASK_ROUTING__LOGIC_VERIFICATION__FALLBACK=deepseek/deepseek-chat-v3-0324

# --- Novelty verification: cross-family novelty assessment (before web search) ---
X_CREATIVE_TASK_ROUTING__NOVELTY_VERIFICATION__MODEL=google/gemini-2.5-flash-lite
X_CREATIVE_TASK_ROUTING__NOVELTY_VERIFICATION__TEMPERATURE=0.3
X_CREATIVE_TASK_ROUTING__NOVELTY_VERIFICATION__MAX_TOKENS=2048
# X_CREATIVE_TASK_ROUTING__NOVELTY_VERIFICATION__FALLBACK=deepseek/deepseek-chat-v3-0324

# =============================================================================
# Model routing — Verifiers (standalone verification modules)
# =============================================================================
#
# These are used by the standalone verifier classes (LogicVerifier,
# NoveltyVerifier) which have their own model/provider/timeout settings,
# separate from the task routing above.

# Logic verifier: model for standalone LogicVerifier module
X_CREATIVE_VERIFIERS__LOGIC__MODEL=google/gemini-2.5-flash
X_CREATIVE_VERIFIERS__LOGIC__PROVIDER=openrouter
X_CREATIVE_VERIFIERS__LOGIC__TEMPERATURE=0.2
X_CREATIVE_VERIFIERS__LOGIC__TIMEOUT=60

# Novelty verifier: model for standalone NoveltyVerifier module
X_CREATIVE_VERIFIERS__NOVELTY__MODEL=google/gemini-2.5-flash-lite
X_CREATIVE_VERIFIERS__NOVELTY__PROVIDER=openrouter
X_CREATIVE_VERIFIERS__NOVELTY__TEMPERATURE=0.3
X_CREATIVE_VERIFIERS__NOVELTY__TIMEOUT=45

# =============================================================================
# Model routing — HKG (Hypergraph Knowledge Grounding)
# =============================================================================

# HKG expansion: explore concept space via hypergraph traversal
X_CREATIVE_TASK_ROUTING__HKG_EXPANSION__MODEL=google/gemini-2.5-flash
X_CREATIVE_TASK_ROUTING__HKG_EXPANSION__TEMPERATURE=0.4
# X_CREATIVE_TASK_ROUTING__HKG_EXPANSION__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__HKG_EXPANSION__FALLBACK=deepseek/deepseek-chat-v3-0324

# =============================================================================
# Model routing — Blend / Transform operators
# =============================================================================

# Blend expansion: combine concepts from different hypothesis pairs
X_CREATIVE_TASK_ROUTING__BLEND_EXPANSION__MODEL=google/gemini-2.5-pro
X_CREATIVE_TASK_ROUTING__BLEND_EXPANSION__TEMPERATURE=0.8
# X_CREATIVE_TASK_ROUTING__BLEND_EXPANSION__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__BLEND_EXPANSION__FALLBACK=deepseek/deepseek-r1

# Transform space: explore transformed conceptual spaces
X_CREATIVE_TASK_ROUTING__TRANSFORM_SPACE__MODEL=google/gemini-2.5-flash
X_CREATIVE_TASK_ROUTING__TRANSFORM_SPACE__TEMPERATURE=0.6
# X_CREATIVE_TASK_ROUTING__TRANSFORM_SPACE__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__TRANSFORM_SPACE__FALLBACK=deepseek/deepseek-chat-v3-0324

# =============================================================================
# Model routing — Talker-Reasoner (used by `run solve`)
# =============================================================================

# Reasoner: multi-step reasoning to build structured belief state
X_CREATIVE_TASK_ROUTING__REASONER_STEP__MODEL=deepseek/deepseek-r1
X_CREATIVE_TASK_ROUTING__REASONER_STEP__TEMPERATURE=0.3
# X_CREATIVE_TASK_ROUTING__REASONER_STEP__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__REASONER_STEP__FALLBACK=google/gemini-2.5-pro

# Talker: generate final detailed output from belief state
X_CREATIVE_TASK_ROUTING__TALKER_OUTPUT__MODEL=google/gemini-2.5-pro
X_CREATIVE_TASK_ROUTING__TALKER_OUTPUT__TEMPERATURE=0.2
X_CREATIVE_TASK_ROUTING__TALKER_OUTPUT__MAX_TOKENS=8192
# X_CREATIVE_TASK_ROUTING__TALKER_OUTPUT__FALLBACK=deepseek/deepseek-chat-v3-0324

# =============================================================================
# Model routing — Constraint compliance (used by `answer` deep research)
# =============================================================================

# Constraint compliance audit: audit hypothesis against domain constraints
X_CREATIVE_TASK_ROUTING__CONSTRAINT_COMPLIANCE_AUDIT__MODEL=google/gemini-2.5-flash
X_CREATIVE_TASK_ROUTING__CONSTRAINT_COMPLIANCE_AUDIT__TEMPERATURE=0.3
# X_CREATIVE_TASK_ROUTING__CONSTRAINT_COMPLIANCE_AUDIT__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__CONSTRAINT_COMPLIANCE_AUDIT__FALLBACK=deepseek/deepseek-chat-v3-0324

# Constraint compliance revision: revise hypothesis to satisfy violated constraints
X_CREATIVE_TASK_ROUTING__CONSTRAINT_COMPLIANCE_REVISION__MODEL=google/gemini-2.5-pro
X_CREATIVE_TASK_ROUTING__CONSTRAINT_COMPLIANCE_REVISION__TEMPERATURE=0.3
# X_CREATIVE_TASK_ROUTING__CONSTRAINT_COMPLIANCE_REVISION__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__CONSTRAINT_COMPLIANCE_REVISION__FALLBACK=deepseek/deepseek-chat-v3-0324

# =============================================================================
# SAGA dual-process cognitive architecture (experimental)
# =============================================================================

# Enable SAGA mode (Slow Agent + Fast Agent parallel execution)
X_CREATIVE_SAGA_ENABLE_BY_DEFAULT=false

# Total cognitive budget in units (1 unit ≈ 1 standard LLM call)
X_CREATIVE_SAGA_DEFAULT_BUDGET=100.0

# --- SAGA model routing ---

# Adversarial evaluation: cross-family model to detect reward hacking
X_CREATIVE_TASK_ROUTING__SAGA_ADVERSARIAL__MODEL=deepseek/deepseek-chat-v3-0324
X_CREATIVE_TASK_ROUTING__SAGA_ADVERSARIAL__TEMPERATURE=0.4
# X_CREATIVE_TASK_ROUTING__SAGA_ADVERSARIAL__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__SAGA_ADVERSARIAL__FALLBACK=google/gemini-2.5-flash

# Checkpoint: lightweight fast verification at pipeline gates
X_CREATIVE_TASK_ROUTING__SAGA_CHECKPOINT__MODEL=google/gemini-2.5-flash-lite
X_CREATIVE_TASK_ROUTING__SAGA_CHECKPOINT__TEMPERATURE=0.2
# X_CREATIVE_TASK_ROUTING__SAGA_CHECKPOINT__MAX_TOKENS=2048
# X_CREATIVE_TASK_ROUTING__SAGA_CHECKPOINT__FALLBACK=deepseek/deepseek-chat-v3-0324

# Deep audit: thorough quality review using strongest model
X_CREATIVE_TASK_ROUTING__SAGA_DEEP_AUDIT__MODEL=google/gemini-2.5-flash
X_CREATIVE_TASK_ROUTING__SAGA_DEEP_AUDIT__TEMPERATURE=0.3
# X_CREATIVE_TASK_ROUTING__SAGA_DEEP_AUDIT__MAX_TOKENS=4096
# X_CREATIVE_TASK_ROUTING__SAGA_DEEP_AUDIT__FALLBACK=deepseek/deepseek-chat-v3-0324

# --- SAGA cognitive budget allocation (must sum to 100%) ---

# Emergency reserve for unexpected situations
X_CREATIVE_COGNITIVE_BUDGET_EMERGENCY_RESERVE=10.0

# Domain audit monitoring budget
X_CREATIVE_COGNITIVE_BUDGET_DOMAIN_AUDIT=9.0

# BISO stage monitoring budget
X_CREATIVE_COGNITIVE_BUDGET_BISO_MONITOR=13.5

# SEARCH stage monitoring budget
X_CREATIVE_COGNITIVE_BUDGET_SEARCH_MONITOR=13.5

# VERIFY stage monitoring budget
X_CREATIVE_COGNITIVE_BUDGET_VERIFY_MONITOR=18.0

# Adversarial checking budget
X_CREATIVE_COGNITIVE_BUDGET_ADVERSARIAL=22.5

# Global review / oversight budget
X_CREATIVE_COGNITIVE_BUDGET_GLOBAL_REVIEW=13.5

# =============================================================================
# HKG (Hypergraph Knowledge Grounding) settings
# =============================================================================

# Enable HKG mode for structure-guided creativity
X_CREATIVE_HKG_ENABLED=false

# Path to HKG store file (leave empty for auto-generated in session dir)
X_CREATIVE_HKG_STORE_PATH=

# Enable hyperbridge connections between distant concepts
X_CREATIVE_HKG_ENABLE_HYPERBRIDGE=false

# Enable structural scoring from graph topology
X_CREATIVE_HKG_ENABLE_STRUCTURAL_SCORING=false

# Weight of structural score in final ranking
X_CREATIVE_HKG_STRUCTURAL_SCORE_WEIGHT=0.10

# Number of shortest hyperpaths to find
X_CREATIVE_HKG_K=3

# Minimum shared nodes between hyperedges for connection
X_CREATIVE_HKG_IS=1

# Maximum hyperpath length
X_CREATIVE_HKG_MAX_LEN=6

# Node matching strategy: auto | exact | embedding
X_CREATIVE_HKG_MATCHER=auto

# Embedding provider for HKG semantic node matching
X_CREATIVE_HKG_EMBEDDING_PROVIDER=openrouter

# Embedding model for HKG semantic node matching
X_CREATIVE_HKG_EMBEDDING_MODEL=openai/text-embedding-3-small

# Path to pre-built embedding index (leave empty for auto-generated)
X_CREATIVE_HKG_EMBEDDING_INDEX_PATH=

# Top N hypotheses to use in HKG expansion
X_CREATIVE_HKG_TOP_N_HYPOTHESES=5

# =============================================================================
# Mapping quality gate
# =============================================================================

# Enable quality gate filtering on analogical mappings
X_CREATIVE_MAPPING_QUALITY_GATE_ENABLED=true

# Minimum mapping score to pass the gate
X_CREATIVE_MAPPING_QUALITY_GATE_THRESHOLD=6.0

# =============================================================================
# Constraint budget
# =============================================================================

# Maximum number of constraints per session
X_CREATIVE_MAX_CONSTRAINTS=15

# Similarity threshold for constraint deduplication (0-1)
X_CREATIVE_CONSTRAINT_SIMILARITY_THRESHOLD=0.6

# =============================================================================
# QD-Pareto selection (Quality-Diversity)
# =============================================================================

# Enable Pareto-optimal selection for hypothesis diversity
X_CREATIVE_PARETO_SELECTION_ENABLED=false

# Number of bins along the novelty dimension
X_CREATIVE_PARETO_NOVELTY_BINS=5

# Novelty weight minimum for sweep
X_CREATIVE_PARETO_WN_MIN=0.15

# Novelty weight maximum for sweep
X_CREATIVE_PARETO_WN_MAX=0.55

# Gamma parameter for diversity pressure
X_CREATIVE_PARETO_GAMMA=2.0

# =============================================================================
# MOME (Multi-Objective MAP-Elites)
# Requires PARETO_SELECTION_ENABLED=true
# =============================================================================

# Enable MOME archive for multi-objective diversity
X_CREATIVE_MOME_ENABLED=false

# Cell capacity per archive dimension
X_CREATIVE_MOME_CELL_CAPACITY=10

# =============================================================================
# Creativity search operators
# =============================================================================

# Enable extreme-value search for boundary hypotheses
X_CREATIVE_ENABLE_EXTREME=true

# Enable blend operator (combine pairs of hypotheses)
X_CREATIVE_ENABLE_BLENDING=false

# Enable transform-space operator (conceptual space shifts)
X_CREATIVE_ENABLE_TRANSFORM_SPACE=false

# Max hypothesis pairs to blend per search round
X_CREATIVE_MAX_BLEND_PAIRS=3

# Max hypotheses to generate via transform per round
X_CREATIVE_MAX_TRANSFORM_HYPOTHESES=2

# LLM call budget for blend expansion per round
X_CREATIVE_BLEND_EXPAND_BUDGET_PER_ROUND=3

# LLM call budget for transform-space per round
X_CREATIVE_TRANSFORM_SPACE_BUDGET_PER_ROUND=2

# Top N hypotheses for hyperpath-guided expansion
X_CREATIVE_HYPERPATH_EXPAND_TOPN=5

# =============================================================================
# C-K (Concept-Knowledge) Coordinator
# =============================================================================

# Enable C-K theory coordinator for concept/knowledge phase switching
X_CREATIVE_CK_ENABLED=false

# Minimum phase duration in seconds before switching
X_CREATIVE_CK_MIN_PHASE_DURATION_S=10.0

# Max K-space expansions per session
X_CREATIVE_CK_MAX_K_EXPANSION_PER_SESSION=5

# Number of rounds without new coverage to detect plateau
X_CREATIVE_CK_COVERAGE_PLATEAU_THRESHOLD=2

# Evidence gap score threshold to trigger K→C switch
X_CREATIVE_CK_EVIDENCE_GAP_THRESHOLD=5.0

# =============================================================================
# Slow-Agent detector thresholds (SAGA anomaly detection)
# =============================================================================

# Score compression detection threshold (0-10)
# When score variance falls below this, Slow Agent flags potential reward hacking
X_CREATIVE_SCORE_COMPRESSION_THRESHOLD=0.8

# Dimension collinearity threshold (0-1)
# When scoring dimensions correlate above this, Slow Agent flags dimension collapse
X_CREATIVE_DIMENSION_COLINEARITY_THRESHOLD=0.7
